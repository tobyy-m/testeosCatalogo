<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <title>MIT ESTAMPADOS - Buzos con Estampados Únicos</title>
    <div id="head-container"></div>
</head>

<body>
    <!-- Contenedor de navegación -->
    <div id="navbar-container"></div>

    <header class="bg-dark text-white text-center py-5 mt-5">
        <h1>MIT ESTAMPADOS</h1>
        <p class="lead">Estampados y sublimaciones</p>
    </header>
    
    <main class="pt-4">
        <section id="diseños" class="container my-5">
            <h2 class="text-center mb-4">Nuestros diseños</h2>

            <div class="row g-4">
                <!-- Las tarjetas de productos se cargarán aquí -->
                <div id="productos-container"></div>
            </div>
        </section>
    </main>

    <!-- Contenedores para componentes -->
    <div id="modal-container"></div>
    <div id="footer-container"></div>

    <!-- Scripts optimizados -->
    <script>
        // Cargar componentes de forma optimizada
        Promise.all([
            fetch('componentes/head.html').then(r => r.text()),
            fetch('componentes/navbar.html').then(r => r.text()),
            fetch('componentes/footer.html').then(r => r.text()),
            fetch('componentes/modalBootstrap.html').then(r => r.text()),
            fetch('componentes/scripts.html').then(r => r.text())
        ]).then(([head, navbar, footer, modal, scripts]) => {
            document.querySelector('#head-container').innerHTML = head;
            document.querySelector('#navbar-container').innerHTML = navbar;
            document.querySelector('#footer-container').innerHTML = footer;
            document.querySelector('#modal-container').innerHTML = modal;
            
            // Cargar productos específicos de buzos
            loadBuzosProducts();
            
            // Ejecutar scripts al final
            const scriptsDiv = document.createElement('div');
            scriptsDiv.innerHTML = scripts;
            document.body.appendChild(scriptsDiv);
            
            // Mostrar página
            document.body.classList.add('page-loaded');
        });

        // Función para cargar productos de buzos
        function loadBuzosProducts() {
            const productos = [
                {
                    id: 'dreamMaker',
                    nombre: 'Buzo Dream Maker',
                    imagenes: ['dreamMaker_blanco_front.webp', 'dreamMaker_blanco_back.webp'],
                    url: 'productos/buzos/buzoDreamMaker.html'
                },
                {
                    id: 'justice',
                    nombre: 'Buzo Justice',
                    imagenes: ['buzoJustice_negro_arena_front.webp', 'buzoJustice_negro_arena_back.webp'],
                    url: 'productos/buzos/buzoJustice.html'
                },
                // ... más productos
            ];

            const container = document.getElementById('productos-container');
            container.innerHTML = productos.map((producto, index) => `
                <div class="col-md-4">
                    <div class="card h-200">
                        <div id="carousel${index}" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                ${producto.imagenes.map((img, imgIndex) => `
                                    <div class="carousel-item ${imgIndex === 0 ? 'active' : ''}">
                                        <img src="imagenes/buzos/${producto.id}/${img}" 
                                             class="d-block w-100" 
                                             alt="${producto.nombre}" 
                                             loading="lazy">
                                    </div>
                                `).join('')}
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carousel${index}" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carousel${index}" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body text-center">
                        <h5 class="card-title">${producto.nombre}</h5>
                        <a href="${producto.url}" class="btn btn-outline-primary btn-ver-mas">Ver más</a>
                    </div>
                </div>
            `).join('');
        }
    </script>

    <style>
        body { visibility: hidden; }
        .page-loaded { visibility: visible !important; }
    </style>
</body>
</html>
